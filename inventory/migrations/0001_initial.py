# Generated by Django 5.0.14 on 2025-07-25 19:30

import django.core.validators
import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('name', models.CharField(max_length=100, verbose_name='نام دسته')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='کد دسته')),
                ('description', models.TextField(blank=True, null=True, verbose_name='توضیحات')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='inventory.category', verbose_name='دسته والد')),
            ],
            options={
                'verbose_name': 'دسته\u200cبندی',
                'verbose_name_plural': 'دسته\u200cبندی\u200cها',
            },
        ),
        migrations.CreateModel(
            name='Item',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('name', models.CharField(max_length=200, verbose_name='نام کالا')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='کد کالا')),
                ('barcode', models.CharField(blank=True, max_length=100, null=True, unique=True, verbose_name='بارکد')),
                ('brand', models.CharField(blank=True, max_length=100, null=True, verbose_name='برند')),
                ('model', models.CharField(blank=True, max_length=100, null=True, verbose_name='مدل')),
                ('specifications', models.JSONField(blank=True, default=dict, verbose_name='مشخصات فنی')),
                ('min_stock_level', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='حداقل موجودی')),
                ('max_stock_level', models.DecimalField(decimal_places=3, default=0, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='حداکثر موجودی')),
                ('alert_threshold', models.DecimalField(decimal_places=3, default=5, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='آستانه هشدار موجودی')),
                ('enable_low_stock_alert', models.BooleanField(default=True, verbose_name='فعال\u200cسازی هشدار کمبود')),
                ('cost_method', models.CharField(choices=[('FIFO', 'اول وارد، اول خارج'), ('LIFO', 'آخر وارد، اول خارج'), ('AVERAGE', 'میانگین موزون')], default='FIFO', max_length=20, verbose_name='روش قیمت\u200cگذاری')),
                ('has_expiry', models.BooleanField(default=False, verbose_name='دارای تاریخ انقضا')),
                ('has_serial', models.BooleanField(default=False, verbose_name='دارای شماره سریال')),
                ('has_batch', models.BooleanField(default=True, verbose_name='دارای شماره بچ')),
                ('storage_conditions', models.TextField(blank=True, null=True, verbose_name='شرایط نگهداری')),
                ('storage_temperature_min', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='حداقل دما')),
                ('storage_temperature_max', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='حداکثر دما')),
                ('description', models.TextField(blank=True, null=True, verbose_name='توضیحات')),
                ('usage_instructions', models.TextField(blank=True, null=True, verbose_name='دستورالعمل استفاده')),
                ('image', models.ImageField(blank=True, null=True, upload_to='items/', verbose_name='تصویر')),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.category', verbose_name='دسته\u200cبندی')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
            ],
            options={
                'verbose_name': 'کالا',
                'verbose_name_plural': 'کالاها',
            },
        ),
        migrations.CreateModel(
            name='StockBatch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('batch_number', models.CharField(max_length=100, verbose_name='شماره بچ')),
                ('production_date', models.DateField(blank=True, null=True, verbose_name='تاریخ تولید')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='تاریخ انقضا')),
                ('supplier', models.CharField(blank=True, max_length=200, null=True, verbose_name='تامین\u200cکننده')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='batches', to='inventory.item', verbose_name='کالا')),
            ],
            options={
                'verbose_name': 'بچ کالا',
                'verbose_name_plural': 'بچ\u200cهای کالا',
                'unique_together': {('item', 'batch_number')},
            },
        ),
        migrations.CreateModel(
            name='UnitOfMeasure',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('name', models.CharField(max_length=50, verbose_name='نام واحد')),
                ('symbol', models.CharField(max_length=10, verbose_name='نماد واحد')),
                ('description', models.TextField(blank=True, null=True, verbose_name='توضیحات')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
            ],
            options={
                'verbose_name': 'واحد اندازه\u200cگیری',
                'verbose_name_plural': 'واحدهای اندازه\u200cگیری',
            },
        ),
        migrations.AddField(
            model_name='item',
            name='primary_unit',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='primary_items', to='inventory.unitofmeasure', verbose_name='واحد اصلی'),
        ),
        migrations.CreateModel(
            name='Warehouse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('name', models.CharField(max_length=100, verbose_name='نام انبار')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='کد انبار')),
                ('location', models.TextField(blank=True, null=True, verbose_name='آدرس انبار')),
                ('description', models.TextField(blank=True, null=True, verbose_name='توضیحات')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_warehouses', to=settings.AUTH_USER_MODEL, verbose_name='مدیر انبار')),
            ],
            options={
                'verbose_name': 'انبار',
                'verbose_name_plural': 'انبارها',
            },
        ),
        migrations.CreateModel(
            name='StockTransfer',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('transfer_number', models.CharField(max_length=50, unique=True, verbose_name='شماره انتقال')),
                ('quantity', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0.001)], verbose_name='مقدار')),
                ('primary_quantity', models.DecimalField(decimal_places=3, max_digits=15, verbose_name='مقدار به واحد اصلی')),
                ('unit_cost', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='قیمت واحد')),
                ('total_cost', models.DecimalField(decimal_places=2, max_digits=20, verbose_name='قیمت کل')),
                ('status', models.CharField(choices=[('PENDING', 'در انتظار'), ('IN_TRANSIT', 'در حال انتقال'), ('COMPLETED', 'تکمیل شده'), ('CANCELLED', 'لغو شده')], default='PENDING', max_length=20, verbose_name='وضعیت')),
                ('transfer_date', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ انتقال')),
                ('completed_date', models.DateTimeField(blank=True, null=True, verbose_name='تاریخ تکمیل')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='یادداشت')),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='inventory.stockbatch', verbose_name='بچ')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.item', verbose_name='کالا')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.unitofmeasure', verbose_name='واحد')),
                ('from_warehouse', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='transfers_out', to='inventory.warehouse', verbose_name='از انبار')),
                ('to_warehouse', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='transfers_in', to='inventory.warehouse', verbose_name='به انبار')),
            ],
            options={
                'verbose_name': 'انتقال انبار',
                'verbose_name_plural': 'انتقالات انبار',
            },
        ),
        migrations.AddField(
            model_name='item',
            name='allowed_warehouses',
            field=models.ManyToManyField(blank=True, to='inventory.warehouse', verbose_name='انبارهای مجاز'),
        ),
        migrations.CreateModel(
            name='Inventory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('quantity', models.DecimalField(decimal_places=3, default=0, max_digits=15, verbose_name='مقدار')),
                ('value', models.DecimalField(decimal_places=2, default=0, max_digits=20, verbose_name='ارزش ریالی')),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='آخرین بروزرسانی')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.item', verbose_name='کالا')),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.stockbatch', verbose_name='بچ')),
                ('warehouse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.warehouse', verbose_name='انبار')),
            ],
            options={
                'verbose_name': 'موجودی انبار',
                'verbose_name_plural': 'موجودی\u200cهای انبار',
            },
        ),
        migrations.CreateModel(
            name='ActivityLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action', models.CharField(choices=[('CREATE_CATEGORY', 'ایجاد دسته\u200cبندی'), ('UPDATE_CATEGORY', 'بروزرسانی دسته\u200cبندی'), ('DELETE_CATEGORY', 'حذف دسته\u200cبندی'), ('CREATE_ITEM', 'ایجاد کالا'), ('UPDATE_ITEM', 'بروزرسانی کالا'), ('DELETE_ITEM', 'حذف کالا'), ('CREATE_UNIT', 'ایجاد واحد'), ('UPDATE_UNIT', 'بروزرسانی واحد'), ('DELETE_UNIT', 'حذف واحد'), ('CREATE_WAREHOUSE', 'ایجاد انبار'), ('UPDATE_WAREHOUSE', 'بروزرسانی انبار'), ('DELETE_WAREHOUSE', 'حذف انبار'), ('CREATE_STOCK_ENTRY', 'ثبت ورودی انبار'), ('UPDATE_STOCK_ENTRY', 'بروزرسانی ورودی انبار'), ('DELETE_STOCK_ENTRY', 'حذف ورودی انبار'), ('CREATE_STOCK_EXIT', 'ثبت خروجی انبار'), ('UPDATE_STOCK_EXIT', 'بروزرسانی خروجی انبار'), ('DELETE_STOCK_EXIT', 'حذف خروجی انبار'), ('LOGIN', 'ورود به سیستم'), ('LOGOUT', 'خروج از سیستم'), ('VIEW_REPORT', 'مشاهده گزارش'), ('EXPORT_DATA', 'خروجی گرفتن از داده\u200cها')], max_length=50, verbose_name='عمل انجام شده')),
                ('details', models.JSONField(blank=True, default=dict, verbose_name='جزئیات')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='آدرس IP')),
                ('user_agent', models.TextField(blank=True, verbose_name='User Agent')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_logs', to=settings.AUTH_USER_MODEL, verbose_name='کاربر')),
            ],
            options={
                'verbose_name': 'لاگ فعالیت',
                'verbose_name_plural': 'لاگ\u200cهای فعالیت',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['user', '-created_at'], name='inventory_a_user_id_85afc3_idx'), models.Index(fields=['action', '-created_at'], name='inventory_a_action_1a7213_idx'), models.Index(fields=['-created_at'], name='inventory_a_created_fcdbcb_idx')],
            },
        ),
        migrations.CreateModel(
            name='ItemUnit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('conversion_factor', models.DecimalField(decimal_places=6, max_digits=15, validators=[django.core.validators.MinValueValidator(1e-06)], verbose_name='ضریب تبدیل')),
                ('is_purchase_unit', models.BooleanField(default=False, verbose_name='واحد خرید')),
                ('is_sales_unit', models.BooleanField(default=False, verbose_name='واحد فروش')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='units', to='inventory.item', verbose_name='کالا')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.unitofmeasure', verbose_name='واحد')),
            ],
            options={
                'verbose_name': 'واحد کالا',
                'verbose_name_plural': 'واحدهای کالا',
                'unique_together': {('item', 'unit')},
            },
        ),
        migrations.CreateModel(
            name='StockMovement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('movement_type', models.CharField(choices=[('ENTRY', 'ورودی'), ('EXIT', 'خروجی'), ('TRANSFER_IN', 'انتقال ورودی'), ('TRANSFER_OUT', 'انتقال خروجی'), ('ADJUSTMENT', 'تعدیل')], max_length=20, verbose_name='نوع حرکت')),
                ('quantity_before', models.DecimalField(decimal_places=3, max_digits=15, verbose_name='موجودی قبل')),
                ('quantity_change', models.DecimalField(decimal_places=3, max_digits=15, verbose_name='تغییر مقدار')),
                ('quantity_after', models.DecimalField(decimal_places=3, max_digits=15, verbose_name='موجودی بعد')),
                ('value_before', models.DecimalField(decimal_places=2, max_digits=20, verbose_name='ارزش قبل')),
                ('value_change', models.DecimalField(decimal_places=2, max_digits=20, verbose_name='تغییر ارزش')),
                ('value_after', models.DecimalField(decimal_places=2, max_digits=20, verbose_name='ارزش بعد')),
                ('reference_id', models.PositiveIntegerField(verbose_name='شناسه مرجع')),
                ('reference_type', models.CharField(max_length=50, verbose_name='نوع مرجع')),
                ('movement_date', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ حرکت')),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='inventory.stockbatch', verbose_name='بچ')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.item', verbose_name='کالا')),
                ('warehouse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.warehouse', verbose_name='انبار')),
            ],
            options={
                'verbose_name': 'حرکت انبار',
                'verbose_name_plural': 'حرکات انبار',
                'indexes': [models.Index(fields=['item', 'warehouse'], name='inventory_s_item_id_3d2f9a_idx'), models.Index(fields=['movement_date'], name='inventory_s_movemen_25c7cf_idx'), models.Index(fields=['movement_type'], name='inventory_s_movemen_018f99_idx')],
            },
        ),
        migrations.CreateModel(
            name='StockExit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('exit_number', models.CharField(max_length=50, unique=True, verbose_name='شماره خروجی')),
                ('quantity', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0.001)], verbose_name='مقدار')),
                ('unit_conversion_factor', models.DecimalField(decimal_places=6, default=1, max_digits=15, verbose_name='ضریب تبدیل واحد')),
                ('primary_quantity', models.DecimalField(decimal_places=3, max_digits=15, verbose_name='مقدار به واحد اصلی')),
                ('unit_cost', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='قیمت واحد')),
                ('total_cost', models.DecimalField(decimal_places=2, max_digits=20, verbose_name='قیمت کل')),
                ('exit_date', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ خروج')),
                ('exit_type', models.CharField(choices=[('CONSUMPTION', 'مصرف'), ('TRANSFER', 'انتقال'), ('RETURN', 'برگشت'), ('WASTE', 'ضایعات'), ('ADJUSTMENT', 'تعدیل')], default='CONSUMPTION', max_length=20, verbose_name='نوع خروج')),
                ('recipient_name', models.CharField(max_length=200, verbose_name='نام تحویل\u200cگیرنده')),
                ('recipient_department', models.CharField(blank=True, max_length=100, null=True, verbose_name='بخش تحویل\u200cگیرنده')),
                ('recipient_signature', models.ImageField(blank=True, null=True, upload_to='signatures/', verbose_name='امضای تحویل\u200cگیرنده')),
                ('reference_document', models.CharField(blank=True, max_length=100, null=True, verbose_name='شماره سند مرجع')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='یادداشت')),
                ('serial_numbers', models.JSONField(blank=True, default=list, verbose_name='شماره\u200cهای سریال')),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='inventory.stockbatch', verbose_name='بچ')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.item', verbose_name='کالا')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.unitofmeasure', verbose_name='واحد')),
                ('warehouse', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.warehouse', verbose_name='انبار')),
            ],
            options={
                'verbose_name': 'خروجی انبار',
                'verbose_name_plural': 'خروجی\u200cهای انبار',
                'indexes': [models.Index(fields=['exit_date'], name='inventory_s_exit_da_eb2f6d_idx'), models.Index(fields=['item', 'warehouse'], name='inventory_s_item_id_075e76_idx'), models.Index(fields=['exit_number'], name='inventory_s_exit_nu_feb7d2_idx')],
            },
        ),
        migrations.CreateModel(
            name='StockEntry',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('entry_number', models.CharField(max_length=50, unique=True, verbose_name='شماره ورودی')),
                ('quantity', models.DecimalField(decimal_places=3, max_digits=15, validators=[django.core.validators.MinValueValidator(0.001)], verbose_name='مقدار')),
                ('unit_conversion_factor', models.DecimalField(decimal_places=6, default=1, max_digits=15, verbose_name='ضریب تبدیل واحد')),
                ('primary_quantity', models.DecimalField(decimal_places=3, max_digits=15, verbose_name='مقدار به واحد اصلی')),
                ('unit_cost', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(0)], verbose_name='قیمت واحد')),
                ('total_cost', models.DecimalField(decimal_places=2, max_digits=20, verbose_name='قیمت کل')),
                ('entry_date', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ورود')),
                ('reference_document', models.CharField(blank=True, max_length=100, null=True, verbose_name='شماره سند مرجع')),
                ('supplier', models.CharField(blank=True, max_length=200, null=True, verbose_name='تامین\u200cکننده')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='یادداشت')),
                ('serial_numbers', models.JSONField(blank=True, default=list, verbose_name='شماره\u200cهای سریال')),
                ('batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='inventory.stockbatch', verbose_name='بچ')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.item', verbose_name='کالا')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.unitofmeasure', verbose_name='واحد')),
                ('warehouse', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='inventory.warehouse', verbose_name='انبار')),
            ],
            options={
                'verbose_name': 'ورودی انبار',
                'verbose_name_plural': 'ورودی\u200cهای انبار',
                'indexes': [models.Index(fields=['entry_date'], name='inventory_s_entry_d_aaa22b_idx'), models.Index(fields=['item', 'warehouse'], name='inventory_s_item_id_761e46_idx'), models.Index(fields=['entry_number'], name='inventory_s_entry_n_ebb92d_idx')],
            },
        ),
        migrations.CreateModel(
            name='ItemWarehouse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ بروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('min_stock', models.DecimalField(decimal_places=3, default=0, max_digits=15, verbose_name='حداقل موجودی')),
                ('max_stock', models.DecimalField(decimal_places=3, default=0, max_digits=15, verbose_name='حداکثر موجودی')),
                ('warehouse_alert_threshold', models.DecimalField(blank=True, decimal_places=3, max_digits=15, null=True, validators=[django.core.validators.MinValueValidator(0)], verbose_name='آستانه هشدار در این انبار')),
                ('location', models.CharField(blank=True, max_length=100, null=True, verbose_name='موقعیت در انبار')),
                ('shelf', models.CharField(blank=True, max_length=50, null=True, verbose_name='قفسه')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='ایجاد شده توسط')),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.item', verbose_name='کالا')),
                ('warehouse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='inventory.warehouse', verbose_name='انبار')),
            ],
            options={
                'verbose_name': 'کالا در انبار',
                'verbose_name_plural': 'کالاها در انبار',
                'unique_together': {('item', 'warehouse')},
            },
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['code'], name='inventory_i_code_0aa0a4_idx'),
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['barcode'], name='inventory_i_barcode_209767_idx'),
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['name'], name='inventory_i_name_637656_idx'),
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['category'], name='inventory_i_categor_dcc1fb_idx'),
        ),
        migrations.AddIndex(
            model_name='inventory',
            index=models.Index(fields=['item', 'warehouse'], name='inventory_i_item_id_3ead4d_idx'),
        ),
        migrations.AddIndex(
            model_name='inventory',
            index=models.Index(fields=['quantity'], name='inventory_i_quantit_ef61d1_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='inventory',
            unique_together={('item', 'warehouse', 'batch')},
        ),
    ]
