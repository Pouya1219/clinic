<!-- templates/inventory/components/modal_base.html -->
<div class="modal fade" id="{{ modal_id }}" tabindex="-1" aria-labelledby="{{ modal_id }}Label" aria-hidden="true">
    <div class="modal-dialog {{ modal_size|default:'modal-lg' }}">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="{{ modal_id }}Label">
                    {% if modal_icon %}<i class="{{ modal_icon }} me-2"></i>{% endif %}
                    {{ modal_title }}
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
            </div>
            
            {% if form_id %}
            <form id="{{ form_id }}" {% if form_action %}action="{{ form_action }}"{% endif %} {% if form_method %}method="{{ form_method }}"{% endif %}>
                {% csrf_token %}
            {% endif %}
            
            <div class="modal-body">
                {% block modal_body %}
                {{ modal_content|safe }}
                {% endblock %}
            </div>
            
            <div class="modal-footer">
                {% block modal_footer %}
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>انصراف
                </button>
                {% if submit_button %}
                <button type="{% if form_id %}submit{% else %}button{% endif %}" class="btn btn-{{ submit_button_type|default:'primary' }}" id="{{ submit_button_id|default:'submitBtn' }}">
                    {% if submit_button_icon %}<i class="{{ submit_button_icon }} me-2"></i>{% endif %}
                    <span id="submitBtnText">{{ submit_button_text|default:'ذخیره' }}</span>
                    <span id="submitSpinner" class="spinner-border spinner-border-sm ms-2" style="display: none;"></span>
                </button>
                {% endif %}
                {% endblock %}
            </div>
            
            {% if form_id %}
            </form>
            {% endif %}
        </div>
    </div>
</div>
