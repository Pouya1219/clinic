<!-- Modal افزودن ورودی -->
<div class="modal fade" id="entryModal" tabindex="-1" aria-labelledby="entryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="entryModalLabel">
                    <i class="fas fa-plus me-2"></i>
                    ثبت ورودی جدید
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="entryForm">
                    {% csrf_token %}
                    <input type="hidden" id="entry_id" name="entry_id">
                    
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-calendar text-primary me-1"></i>
                                تاریخ ورود <span class="text-danger">*</span>
                            </label>
                            <input type="date" class="form-control" id="entryDate" name="entry_date" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-warehouse text-info me-1"></i>
                                انبار <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="entryWarehouse" name="warehouse_id" required>
                                <option value="">انتخاب انبار</option>
                                {% for warehouse in warehouses %}
                                <option value="{{ warehouse.id }}">{{ warehouse.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-12">
                            <label class="form-label fw-bold">
                                <i class="fas fa-box text-warning me-1"></i>
                                کالا <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="entryItem" name="item_id" required>
                                <option value="">انتخاب کالا</option>
                                {% for item in items %}
                                <option value="{{ item.id }}">{{ item.name }} ({{ item.code }})</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-balance-scale text-success me-1"></i>
                                مقدار <span class="text-danger">*</span>
                            </label>
                            <input type="number" class="form-control" id="entryQuantity" name="quantity" required
                                   min="0.001" step="0.001">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-ruler text-secondary me-1"></i>
                                واحد <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="entryUnit" name="unit_id" required>
                                <option value="">انتخاب واحد</option>
                                {% for unit in units %}
                                <option value="{{ unit.id }}">{{ unit.name }} {% if unit.symbol %}({{ unit.symbol }}){% endif %}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-dollar-sign text-danger me-1"></i>
                                قیمت واحد <span class="text-danger">*</span>
                            </label>
                            <input type="number" class="form-control" id="entryUnitCost" name="unit_cost" required
                                   min="0" step="1">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-money-bill-wave text-success me-1"></i>
                                قیمت کل
                            </label>
                            <input type="number" class="form-control" id="entryTotalCost" name="total_cost" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-user text-primary me-1"></i>
                                تامین‌کننده
                            </label>
                            <input type="text" class="form-control" id="entrySupplier" name="supplier" 
                                   placeholder="نام تامین‌کننده">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-file-invoice text-info me-1"></i>
                                شماره فاکتور
                            </label>
                            <input type="text" class="form-control" id="entryInvoiceNumber" name="invoice_number" 
                                   placeholder="شماره فاکتور">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="fas fa-layer-group text-warning me-1"></i>
                                شماره بچ
                            </label>
                            <input type="text" class="form-control" id="entryBatchNumber" name="batch_number" 
                                   placeholder="شماره بچ">
                        </div>
                        <div class="col-md-6" id="expiryDateGroup" style="display: none;">
                            <label class="form-label fw-bold">
                                <i class="fas fa-calendar-times text-danger me-1"></i>
                                تاریخ انقضا
                            </label>
                            <input type="date" class="form-control" id="entryExpiryDate" name="expiry_date">
                            <div class="form-text">برای کالاهای دارای تاریخ انقضا الزامی است</div>
                        </div>
                        <div class="col-12">
                            <label class="form-label fw-bold">
                                <i class="fas fa-comment text-muted me-1"></i>
                                توضیحات
                            </label>
                            <textarea class="form-control" id="entryDescription" name="description" rows="3" 
                                      placeholder="توضیحات تکمیلی..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>
                    انصراف
                </button>
                <button type="button" class="btn btn-success" onclick="saveEntry()">
                    <i class="fas fa-save me-1"></i>
                    ثبت ورودی
                </button>
            </div>
        </div>
    </div>
</div>


